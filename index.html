<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L-Shape Stone Volume Calculator</title>
  <meta name="description"
    content="Calculate the volume of L-shaped natural stone slabs with an interactive visual model and instant results in cubic metres.">
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ‡±</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Ambient background blobs -->
  <div class="ambient-bg">
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>
  </div>

  <header>
    <div class="logo">
      <span class="logo-emoji">ðŸ‡±</span>
      <span>StoneCalc</span>
    </div>
    <p class="subtitle">L-Shape Natural Stone Volume Calculator</p>
  </header>

  <main>
    <!-- Left: Inputs -->
    <section class="panel input-panel" id="inputPanel">
      <h2>Stone Parameters</h2>
      <p class="panel-desc">Enter dimensions in millimetres. Volume is computed in real time.</p>

      <div class="input-group">
        <label for="length">
          <span class="label-text">Length (L)</span>
          <span class="label-unit">mm</span>
        </label>
        <input type="number" id="length" value="1000" min="1" step="1">
      </div>

      <div class="input-group">
        <label for="width">
          <span class="label-text">Total Width (W)</span>
          <span class="label-unit">mm</span>
        </label>
        <input type="number" id="width" value="750" min="1" step="1">
      </div>

      <div class="input-group">
        <label for="flatThickness">
          <span class="label-text">Flat Thickness (T)</span>
          <span class="label-unit">mm</span>
        </label>
        <input type="number" id="flatThickness" value="100" min="1" step="1">
      </div>

      <div class="input-group">
        <label for="lipWidth">
          <span class="label-text">Lip Width (Lw)</span>
          <span class="label-unit">mm</span>
        </label>
        <input type="number" id="lipWidth" value="100" min="1" step="1">
      </div>

      <div class="input-group">
        <label for="lipHeight">
          <span class="label-text">Lip Drop Height (Lh)</span>
          <span class="label-unit">mm</span>
        </label>
        <input type="number" id="lipHeight" value="100" min="1" step="1">
      </div>

      <div class="input-group">
        <label>
          <span class="label-text">Edge Type</span>
        </label>
        <div class="edge-toggle">
          <label class="edge-option">
            <input type="radio" name="edgeType" value="chamfer" id="edgeChamfer" checked>
            <span>45Â° Chamfer</span>
          </label>
          <label class="edge-option">
            <input type="radio" name="edgeType" value="bullnose" id="edgeBullnose">
            <span>Bullnose</span>
          </label>
        </div>
      </div>

      <div class="input-group">
        <label for="chamfer">
          <span class="label-text" id="chamferLabel">Chamfer Depth (T<sub>r</sub>)</span>
          <span class="label-unit">mm</span>
        </label>
        <input type="number" id="chamfer" value="50" min="0" step="1">
        <span class="input-hint" id="chamferHint">45Â° chamfer leg length on top edge (0 = no edge). Must be less than
          T.</span>
        <button class="auto-fit-btn" id="autoFitBtn" style="display:none" type="button">
          âŠ• Auto-fit radius (pass through inner corner)
        </button>
      </div>

      <div class="input-group">
        <label for="quantity">
          <span class="label-text">Quantity</span>
          <span class="label-unit">pcs</span>
        </label>
        <input type="number" id="quantity" value="1" min="1" step="1">
      </div>

      <!-- Validation message -->
      <div class="validation-msg" id="validationMsg"></div>

      <!-- Results card -->
      <div class="results-card" id="resultsCard">
        <div class="result-row">
          <span class="result-label">Volume per piece</span>
          <span class="result-value" id="volumeOne">â€”</span>
        </div>
        <div class="result-row total">
          <span class="result-label">Total volume</span>
          <span class="result-value" id="volumeTotal">â€”</span>
        </div>
      </div>
    </section>

    <!-- Right: Diagram -->
    <section class="panel diagram-panel" id="diagramPanel">
      <h2>Cross-Section Model</h2>
      <p class="panel-desc">Interactive diagram updates with your parameters.</p>

      <div class="diagram-container" id="diagramContainer">
        <svg id="shapeSvg" viewBox="0 0 700 500" preserveAspectRatio="xMidYMid meet">
          <defs>
            <linearGradient id="stoneGrad" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#7a8a9a" />
              <stop offset="50%" stop-color="#8e9baa" />
              <stop offset="100%" stop-color="#6b7b8b" />
            </linearGradient>
            <filter id="shadow" x="-10%" y="-10%" width="140%" height="140%">
              <feDropShadow dx="3" dy="4" stdDeviation="6" flood-color="#000" flood-opacity="0.35" />
            </filter>
            <!-- hatching pattern -->
            <pattern id="hatch" width="8" height="8" patternUnits="userSpaceOnUse" patternTransform="rotate(45)">
              <line x1="0" y1="0" x2="0" y2="8" stroke="rgba(255,255,255,0.08)" stroke-width="1.5" />
            </pattern>
          </defs>

          <!-- L-shape path (will be updated by JS) -->
          <g id="shapeGroup" filter="url(#shadow)">
            <path id="lShape" d="" fill="url(#stoneGrad)" stroke="#556" stroke-width="1.5" />
            <path id="lShapeHatch" d="" fill="url(#hatch)" />
          </g>

          <!-- Dimension lines (generated by JS) -->
          <g id="dimensions" font-family="Inter, sans-serif" font-size="13" fill="#e0e6ed"></g>
        </svg>
      </div>

      <!-- 3D isometric toggle -->
      <div class="view-toggle">
        <button class="view-btn active" id="btnCross" data-view="cross">Cross-Section</button>
        <button class="view-btn" id="btnIso" data-view="iso">3D Isometric</button>
      </div>

      <!-- Formula card -->
      <div class="formula-card">
        <h3>Formula</h3>
        <p class="formula-text" id="formulaText">
          V = L Ã— [ W Ã— T + Lw Ã— Lh ] âˆ’ Â½ Ã— T<sub>r</sub>Â² Ã— L
        </p>
        <p class="formula-desc" id="formulaDesc">
          The L-shape is decomposed into a flat slab (W Ã— T) plus a vertical lip (Lw Ã— Lh), extruded along L. A 45Â°
          chamfer removes a right-isosceles triangular prism with legs = T<sub>r</sub>.
        </p>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy;
      <script>document.write(new Date().getFullYear())</script> Do The Sang - A PLUS MINERAL MATERIAL CORPORATION
      &mdash; L-Shape Natural Stone Volume Calculator | <a href="https://github.com/sang0920" target="_blank"
        rel="noopener" style="color:#48E0E4;text-decoration:none">GitHub</a>
    </p>
  </footer>

  <script src="app.js"></script>
</body>

</html>